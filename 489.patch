From 2b68c020238cc9c68640ed12c532ea30ea392aed Mon Sep 17 00:00:00 2001
From: Vuatech <vuatech@proton.me>
Date: Tue, 23 Sep 2025 16:33:54 -0400
Subject: [PATCH 1/8] Fixed clang 21 build issues

---
 borders-plus-plus/Makefile       | 10 +++++++++-
 borders-plus-plus/borderDeco.cpp |  4 ++--
 csgo-vulkan-fix/Makefile         |  9 ++++++++-
 hyprbars/Makefile                | 11 +++++++++--
 hyprexpo/Makefile                |  9 ++++++++-
 hyprfocus/Makefile               |  9 ++++++++-
 hyprscrolling/Makefile           | 10 +++++++++-
 hyprtrails/Makefile              |  9 ++++++++-
 hyprwinwrap/Makefile             |  9 ++++++++-
 xtra-dispatchers/Makefile        |  9 ++++++++-
 10 files changed, 77 insertions(+), 12 deletions(-)

diff --git a/borders-plus-plus/Makefile b/borders-plus-plus/Makefile
index a04affc3..60e589ee 100644
--- a/borders-plus-plus/Makefile
+++ b/borders-plus-plus/Makefile
@@ -1,4 +1,12 @@
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
 all:
-	$(CXX) -shared -fPIC --no-gnu-unique main.cpp borderDeco.cpp BorderppPassElement.cpp -o borders-plus-plus.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
+	$(CXX) -shared -fPIC $(EXTRA_FLAGS) main.cpp borderDeco.cpp BorderppPassElement.cpp -o borders-plus-plus.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
+
 clean:
 	rm ./borders-plus-plus.so
diff --git a/borders-plus-plus/borderDeco.cpp b/borders-plus-plus/borderDeco.cpp
index 000e1ad5..6f3d8397 100644
--- a/borders-plus-plus/borderDeco.cpp
+++ b/borders-plus-plus/borderDeco.cpp
@@ -138,11 +138,11 @@ void CBordersPlusPlus::drawPass(PHLMONITOR pMonitor, const float& a) {
         g_pHyprOpenGL->scissor(nullptr);
 
         g_pHyprOpenGL->renderBorder(fullBox, CHyprColor{(uint64_t)**PCOLORS[i]},
-                                    {.round         = **PNATURALROUND ? ORIGINALROUND : rounding,
+                                    {.round = *PNATURALROUND ? static_cast<int>(ORIGINALROUND) : static_cast<int>(rounding),
                                      .roundingPower = ROUNDINGPOWER,
                                      .borderSize    = THISBORDERSIZE,
                                      .a             = a,
-                                     .outerRound    = **PNATURALROUND ? ORIGINALROUND : -1});
+                                     .outerRound = *PNATURALROUND ? static_cast<int>(ORIGINALROUND) : -1});
     }
 
     m_seExtents = {{fullThickness, fullThickness}, {fullThickness, fullThickness}};
diff --git a/csgo-vulkan-fix/Makefile b/csgo-vulkan-fix/Makefile
index f9bb88db..c82db604 100644
--- a/csgo-vulkan-fix/Makefile
+++ b/csgo-vulkan-fix/Makefile
@@ -1,4 +1,11 @@
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
 all:
-	$(CXX) -shared -fPIC --no-gnu-unique main.cpp -o csgo-vulkan-fix.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
+	$(CXX) -shared -fPIC $(EXTRA_FLAGS) main.cpp -o csgo-vulkan-fix.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
 clean:
 	rm ./csgo-vulkan-fix.so
diff --git a/hyprbars/Makefile b/hyprbars/Makefile
index c7a4f612..34a8a7eb 100644
--- a/hyprbars/Makefile
+++ b/hyprbars/Makefile
@@ -1,4 +1,11 @@
-CXXFLAGS = -shared -fPIC --no-gnu-unique -g -std=c++2b -Wno-c++11-narrowing
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
+CXXFLAGS = -shared -fPIC -g -std=c++2b -Wno-c++11-narrowing
 INCLUDES = `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon`
 LIBS = `pkg-config --libs pangocairo`
 
@@ -8,7 +15,7 @@ TARGET = hyprbars.so
 all: $(TARGET)
 
 $(TARGET): $(SRC)
-	$(CXX) $(CXXFLAGS) $(INCLUDES) $^ $> -o $@ $(LIBS) -O2
+	$(CXX) $(CXXFLAGS) $(EXTRA_FLAGS) $(INCLUDES) $^ $> -o $@ $(LIBS) -O2
 
 clean:
 	rm ./$(TARGET)
diff --git a/hyprexpo/Makefile b/hyprexpo/Makefile
index 36598fb4..9cd944cb 100644
--- a/hyprexpo/Makefile
+++ b/hyprexpo/Makefile
@@ -1,4 +1,11 @@
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
 all:
-	$(CXX) -shared -fPIC --no-gnu-unique main.cpp overview.cpp ExpoGesture.cpp OverviewPassElement.cpp -o hyprexpo.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -Wno-narrowing
+	$(CXX) -shared -fPIC $(EXTRA_FLAGS) main.cpp overview.cpp ExpoGesture.cpp OverviewPassElement.cpp -o hyprexpo.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -Wno-narrowing
 clean:
 	rm ./hyprexpo.so
diff --git a/hyprfocus/Makefile b/hyprfocus/Makefile
index 50cc59e7..ce693085 100644
--- a/hyprfocus/Makefile
+++ b/hyprfocus/Makefile
@@ -1,4 +1,11 @@
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
 all:
-	$(CXX) -shared -fPIC --no-gnu-unique main.cpp -o hyprfocus.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
+	$(CXX) -shared -fPIC $(EXTRA_FLAGS) main.cpp -o hyprfocus.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
 clean:
 	rm ./hyprfocus.so
diff --git a/hyprscrolling/Makefile b/hyprscrolling/Makefile
index 4285dba0..e8e224c0 100644
--- a/hyprscrolling/Makefile
+++ b/hyprscrolling/Makefile
@@ -1,4 +1,12 @@
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
+
 all:
-	$(CXX) -shared -fPIC --no-gnu-unique main.cpp Scrolling.cpp -o hyprscrolling.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b
+	$(CXX) -shared -fPIC $(EXTRA_FLAGS) main.cpp Scrolling.cpp -o hyprscrolling.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b
 clean:
 	rm ./hyprscrolling.so
diff --git a/hyprtrails/Makefile b/hyprtrails/Makefile
index 09f5cbd5..06327c66 100644
--- a/hyprtrails/Makefile
+++ b/hyprtrails/Makefile
@@ -1,4 +1,11 @@
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
 all:
-	$(CXX) -shared -fPIC --no-gnu-unique main.cpp trail.cpp TrailPassElement.cpp -o hyprtrails.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
+	$(CXX) -shared -fPIC $(EXTRA_FLAGS) main.cpp trail.cpp TrailPassElement.cpp -o hyprtrails.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
 clean:
 	rm ./hyprtrails.so
diff --git a/hyprwinwrap/Makefile b/hyprwinwrap/Makefile
index 83864da8..a8b0e2a1 100644
--- a/hyprwinwrap/Makefile
+++ b/hyprwinwrap/Makefile
@@ -1,4 +1,11 @@
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
 all:
-	$(CXX) -shared -fPIC --no-gnu-unique main.cpp -o hyprwinwrap.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
+	$(CXX) -shared -fPIC $(EXTRA_FLAGS) main.cpp -o hyprwinwrap.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
 clean:
 	rm ./hyprwinwrap.so
diff --git a/xtra-dispatchers/Makefile b/xtra-dispatchers/Makefile
index 96537fbf..3e8d5c4a 100644
--- a/xtra-dispatchers/Makefile
+++ b/xtra-dispatchers/Makefile
@@ -1,4 +1,11 @@
+# Else exist specifically for clang
+ifeq ($(CXX),g++)
+    EXTRA_FLAGS = --no-gnu-unique
+else
+    EXTRA_FLAGS =
+endif
+
 all:
-	$(CXX) -shared -fPIC --no-gnu-unique main.cpp -o xtra-dispatchers.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
+	$(CXX) -shared -fPIC $(EXTRA_FLAGS) main.cpp -o xtra-dispatchers.so -g `pkg-config --cflags pixman-1 libdrm hyprland pangocairo libinput libudev wayland-server xkbcommon` -std=c++2b -O2
 clean:
 	rm ./xtra-dispatchers.so

From 7e2b963d7fd057a33f74d4243c0bea4ed95fd78a Mon Sep 17 00:00:00 2001
From: VuaTech <vuatech@proton.me>
Date: Tue, 23 Sep 2025 16:40:58 -0400
Subject: [PATCH 2/8] Restored styling and typo

---
 borders-plus-plus/borderDeco.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/borders-plus-plus/borderDeco.cpp b/borders-plus-plus/borderDeco.cpp
index 6f3d8397..394253ea 100644
--- a/borders-plus-plus/borderDeco.cpp
+++ b/borders-plus-plus/borderDeco.cpp
@@ -138,11 +138,11 @@ void CBordersPlusPlus::drawPass(PHLMONITOR pMonitor, const float& a) {
         g_pHyprOpenGL->scissor(nullptr);
 
         g_pHyprOpenGL->renderBorder(fullBox, CHyprColor{(uint64_t)**PCOLORS[i]},
-                                    {.round = *PNATURALROUND ? static_cast<int>(ORIGINALROUND) : static_cast<int>(rounding),
+                                    {.round         = **PNATURALROUND ? static_cast<int>(ORIGINALROUND) : static_cast<int>(rounding),
                                      .roundingPower = ROUNDINGPOWER,
                                      .borderSize    = THISBORDERSIZE,
                                      .a             = a,
-                                     .outerRound = *PNATURALROUND ? static_cast<int>(ORIGINALROUND) : -1});
+                                     .outerRound    = **PNATURALROUND ? static_cast<int>(ORIGINALROUND) : -1});
     }
 
     m_seExtents = {{fullThickness, fullThickness}, {fullThickness, fullThickness}};

From c416a467d231d95c7a7cd2d39c36e95d10ff5c71 Mon Sep 17 00:00:00 2001
From: Vuatech <vuatech@proton.me>
Date: Tue, 23 Sep 2025 17:05:28 -0400
Subject: [PATCH 3/8] Fix build error with clang

---
 hyprtrails/trail.cpp | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/hyprtrails/trail.cpp b/hyprtrails/trail.cpp
index 87e631a8..4ee94f77 100644
--- a/hyprtrails/trail.cpp
+++ b/hyprtrails/trail.cpp
@@ -120,7 +120,7 @@ void CTrail::renderPass(PHLMONITOR pMonitor, const float& a) {
     glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);
 
     glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
-    g_pHyprOpenGL->renderRect(wlrbox, CHyprColor(0, 0, 0, 0), {.round = PWINDOW->rounding() * pMonitor->m_scale, .roundingPower = PWINDOW->roundingPower()});
+    g_pHyprOpenGL->renderRect(wlrbox, CHyprColor(0, 0, 0, 0), {.round = static_cast<int>(PWINDOW->rounding() * pMonitor->m_scale), .roundingPower = PWINDOW->roundingPower()});
     glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);
 
     glStencilFunc(GL_NOTEQUAL, 1, -1);
@@ -243,9 +243,9 @@ void CTrail::renderPass(PHLMONITOR pMonitor, const float& a) {
     }
 
     box thisboxopengl =
-        box{(PWINDOW->m_realPosition->value().x - pMonitor->m_position.x) / pMonitor->m_size.x, (PWINDOW->m_realPosition->value().y - pMonitor->m_position.y) / pMonitor->m_size.y,
-            (PWINDOW->m_realPosition->value().x + PWINDOW->m_realSize->value().x) / pMonitor->m_size.x,
-            (PWINDOW->m_realPosition->value().y + PWINDOW->m_realSize->value().y) / pMonitor->m_size.y};
+        box{static_cast<float>((PWINDOW->m_realPosition->value().x - pMonitor->m_position.x) / pMonitor->m_size.x), static_cast<float>((PWINDOW->m_realPosition->value().y - pMonitor->m_position.y) / pMonitor->m_size.y),
+            static_cast<float>((PWINDOW->m_realPosition->value().x + PWINDOW->m_realSize->value().x) / pMonitor->m_size.x),
+            static_cast<float>((PWINDOW->m_realPosition->value().y + PWINDOW->m_realSize->value().y) / pMonitor->m_size.y)};
     glUniform4f(g_pGlobalState->trailShader.uniformLocations[SHADER_GRADIENT], thisboxopengl.x, thisboxopengl.y, thisboxopengl.w, thisboxopengl.h);
     glUniform4f(g_pGlobalState->trailShader.uniformLocations[SHADER_COLOR], COLOR.r, COLOR.g, COLOR.b, COLOR.a);
 

From 2b74bd5fd7079f3992117598369a7b15828fdeed Mon Sep 17 00:00:00 2001
From: VuaTech <vuatech@proton.me>
Date: Tue, 23 Sep 2025 17:08:47 -0400
Subject: [PATCH 4/8] Format change

---
 hyprtrails/trail.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/hyprtrails/trail.cpp b/hyprtrails/trail.cpp
index 4ee94f77..a55faa28 100644
--- a/hyprtrails/trail.cpp
+++ b/hyprtrails/trail.cpp
@@ -243,7 +243,8 @@ void CTrail::renderPass(PHLMONITOR pMonitor, const float& a) {
     }
 
     box thisboxopengl =
-        box{static_cast<float>((PWINDOW->m_realPosition->value().x - pMonitor->m_position.x) / pMonitor->m_size.x), static_cast<float>((PWINDOW->m_realPosition->value().y - pMonitor->m_position.y) / pMonitor->m_size.y),
+        box{static_cast<float>((PWINDOW->m_realPosition->value().x - pMonitor->m_position.x) / pMonitor->m_size.x), 
+            static_cast<float>((PWINDOW->m_realPosition->value().y - pMonitor->m_position.y) / pMonitor->m_size.y),
             static_cast<float>((PWINDOW->m_realPosition->value().x + PWINDOW->m_realSize->value().x) / pMonitor->m_size.x),
             static_cast<float>((PWINDOW->m_realPosition->value().y + PWINDOW->m_realSize->value().y) / pMonitor->m_size.y)};
     glUniform4f(g_pGlobalState->trailShader.uniformLocations[SHADER_GRADIENT], thisboxopengl.x, thisboxopengl.y, thisboxopengl.w, thisboxopengl.h);

From e9bf4dacd37cd378969d5c0cc6a6ae398399eb31 Mon Sep 17 00:00:00 2001
From: Vuatech <vuatech@proton.me>
Date: Tue, 23 Sep 2025 17:12:02 -0400
Subject: [PATCH 5/8] Fixed remaining two errors related to clang

---
 hyprtrails/trail.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/hyprtrails/trail.cpp b/hyprtrails/trail.cpp
index a55faa28..eca6e39c 100644
--- a/hyprtrails/trail.cpp
+++ b/hyprtrails/trail.cpp
@@ -333,7 +333,7 @@ void CTrail::updateWindow(PHLWINDOW pWindow) {
 }
 
 void CTrail::damageEntire() {
-    CBox dm = {(int)(m_lastWindowPos.x - m_seExtents.topLeft.x), (int)(m_lastWindowPos.y - m_seExtents.topLeft.y),
-               (int)(m_lastWindowSize.x + m_seExtents.topLeft.x + m_seExtents.bottomRight.x), (int)m_seExtents.topLeft.y};
+    CBox dm = {static_cast<double>(m_lastWindowPos.x - m_seExtents.topLeft.x), static_cast<double>((m_lastWindowPos.y - m_seExtents.topLeft.y),
+               static_cast<double>(m_lastWindowSize.x + m_seExtents.topLeft.x + m_seExtents.bottomRight.x), static_cast<double>(m_seExtents.topLeft.y};
     g_pHyprRenderer->damageBox(dm);
 }

From 43d0f0d8863391445a19f51b240f25ccccd125a9 Mon Sep 17 00:00:00 2001
From: Vuatech <vuatech@proton.me>
Date: Tue, 23 Sep 2025 17:15:19 -0400
Subject: [PATCH 6/8] Fixed typo

---
 hyprtrails/trail.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/hyprtrails/trail.cpp b/hyprtrails/trail.cpp
index eca6e39c..97affb4a 100644
--- a/hyprtrails/trail.cpp
+++ b/hyprtrails/trail.cpp
@@ -333,7 +333,7 @@ void CTrail::updateWindow(PHLWINDOW pWindow) {
 }
 
 void CTrail::damageEntire() {
-    CBox dm = {static_cast<double>(m_lastWindowPos.x - m_seExtents.topLeft.x), static_cast<double>((m_lastWindowPos.y - m_seExtents.topLeft.y),
+    CBox dm = {static_cast<double>(m_lastWindowPos.x - m_seExtents.topLeft.x), static_cast<double>(m_lastWindowPos.y - m_seExtents.topLeft.y),
                static_cast<double>(m_lastWindowSize.x + m_seExtents.topLeft.x + m_seExtents.bottomRight.x), static_cast<double>(m_seExtents.topLeft.y};
     g_pHyprRenderer->damageBox(dm);
 }

From d2b50f282382ef6897a3542dcfc903f11b4da5b3 Mon Sep 17 00:00:00 2001
From: Vuatech <vuatech@proton.me>
Date: Tue, 23 Sep 2025 17:17:19 -0400
Subject: [PATCH 7/8] Fixed another typo

---
 hyprtrails/trail.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/hyprtrails/trail.cpp b/hyprtrails/trail.cpp
index 97affb4a..6d3dde42 100644
--- a/hyprtrails/trail.cpp
+++ b/hyprtrails/trail.cpp
@@ -335,5 +335,5 @@ void CTrail::updateWindow(PHLWINDOW pWindow) {
 void CTrail::damageEntire() {
     CBox dm = {static_cast<double>(m_lastWindowPos.x - m_seExtents.topLeft.x), static_cast<double>(m_lastWindowPos.y - m_seExtents.topLeft.y),
                static_cast<double>(m_lastWindowSize.x + m_seExtents.topLeft.x + m_seExtents.bottomRight.x), static_cast<double>(m_seExtents.topLeft.y};
-    g_pHyprRenderer->damageBox(dm);
+    g_pHyprRenderer->damageBox(dm));
 }

From f6e5ac3f4031f715502a74da610057e3117b5341 Mon Sep 17 00:00:00 2001
From: Vuatech <vuatech@proton.me>
Date: Tue, 23 Sep 2025 17:21:56 -0400
Subject: [PATCH 8/8] Fixed the actual typo this time

---
 hyprtrails/trail.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/hyprtrails/trail.cpp b/hyprtrails/trail.cpp
index 6d3dde42..a7c26dd8 100644
--- a/hyprtrails/trail.cpp
+++ b/hyprtrails/trail.cpp
@@ -334,6 +334,6 @@ void CTrail::updateWindow(PHLWINDOW pWindow) {
 
 void CTrail::damageEntire() {
     CBox dm = {static_cast<double>(m_lastWindowPos.x - m_seExtents.topLeft.x), static_cast<double>(m_lastWindowPos.y - m_seExtents.topLeft.y),
-               static_cast<double>(m_lastWindowSize.x + m_seExtents.topLeft.x + m_seExtents.bottomRight.x), static_cast<double>(m_seExtents.topLeft.y};
-    g_pHyprRenderer->damageBox(dm));
+               static_cast<double>(m_lastWindowSize.x + m_seExtents.topLeft.x + m_seExtents.bottomRight.x), static_cast<double>(m_seExtents.topLeft.y)};
+    g_pHyprRenderer->damageBox(dm);
 }
